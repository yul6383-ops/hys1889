<!DOCTYPE html>
<html lang="KO">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="hys.css">
    <link rel="stylesheet" href="jepom.css">
    <title>ì°œ ëª©ë¡ - í•˜ì˜ˆì„±í•©íŒ</title>
    <style>
        .wishlist-container {
            max-width: 1400px;
            margin: 50px auto;
            padding: 0 40px;
        }
        
        .wishlist-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #333;
        }
        
        .wishlist-header h1 {
            font-size: 32px;
            font-weight: bold;
        }
        
        .wishlist-count-text {
            font-size: 18px;
            color: #666;
        }
        
        .wishlist-count-text span {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .wishlist-empty {
            text-align: center;
            padding: 100px 20px;
        }
        
        .wishlist-empty-icon {
            font-size: 80px;
            margin-bottom: 20px;
            opacity: 0.3;
        }
        
        .wishlist-empty h2 {
            font-size: 24px;
            color: #999;
            margin-bottom: 20px;
        }
        
        .wishlist-empty p {
            font-size: 16px;
            color: #aaa;
            margin-bottom: 30px;
        }
        
        .go-shopping-btn {
            display: inline-block;
            padding: 15px 40px;
            background-color: #333;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .go-shopping-btn:hover {
            background-color: #555;
        }
        
        .wishlist-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
        }
        
        .wishlist-item {
            background-color: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s;
            position: relative;
        }
        
        .wishlist-item:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transform: translateY(-5px);
        }
        
        .wishlist-item-image {
            width: 100%;
            padding-bottom: 100%;
            background-color: #f5f5f5;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .wishlist-item-image img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .remove-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 35px;
            height: 35px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 18px;
            color: #e74c3c;
            z-index: 2;
        }
        
        .remove-btn:hover {
            background-color: #e74c3c;
            color: white;
            border-color: #e74c3c;
        }
        
        .wishlist-item-info {
            padding: 20px;
        }
        
        .wishlist-item-category {
            font-size: 12px;
            color: #999;
            margin-bottom: 8px;
        }
        
        .wishlist-item-name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }
        
        .wishlist-item-code {
            font-size: 13px;
            color: #999;
            margin-bottom: 15px;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
            padding: 8px 0;
            background-color: #f8f8f8;
            border-radius: 5px;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            border: 1px solid #ddd;
            background-color: white;
            color: #333;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 3px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quantity-btn:hover {
            background-color: #333;
            color: white;
            border-color: #333;
        }

        .quantity-btn:disabled {
            background-color: #f0f0f0;
            color: #ccc;
            cursor: not-allowed;
            border-color: #e0e0e0;
        }

        .quantity-display {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            min-width: 40px;
            text-align: center;
        }

        .inquiry-btn {
            width: 100%;
            padding: 12px 0;
            background-color: #333;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .inquiry-btn:hover {
            background-color: #555;
        }
        
        .wishlist-actions {
            margin-top: 30px;
            text-align: center;
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .clear-all-btn {
            padding: 12px 30px;
            background-color: white;
            color: #666;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .clear-all-btn:hover {
            background-color: #f5f5f5;
            border-color: #999;
        }
        
        .send-inquiry-btn {
            padding: 12px 30px;
            background-color: #333;
            color: white;
            border: 1px solid #333;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .send-inquiry-btn:hover {
            background-color: #555;
            border-color: #555;
        }
        
        @media (max-width: 1024px) {
            .wishlist-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
            }
        }
        
        @media (max-width: 768px) {
            .wishlist-container {
                padding: 0 20px;
            }
            
            .wishlist-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .wishlist-header h1 {
                font-size: 24px;
            }
            
            .wishlist-actions {
                flex-direction: column;
            }
            
            .clear-all-btn,
            .send-inquiry-btn {
                width: 100%;
            }
        }
        
        @media (max-width: 480px) {
            .wishlist-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            padding: 20px;
            overflow-y: auto;
        }
        
        .modal-overlay.active {
            display: flex !important;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            position: relative;
            background-color: white;
            max-width: 900px;
            width: 90%;
            max-height: 90vh;
            border-radius: 0;
            overflow: hidden;
            animation: modalFadeIn 0.3s;
            display: flex;
            flex-direction: row;
        }
        
        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .modal-close {
            position: absolute;
            right: 10px;
            top: 10px;
            width: 35px;
            height: 35px;
            background-color: #333;
            color: white;
            border: none;
            border-radius: 0;
            font-size: 20px;
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .modal-close:hover {
            background-color: #555;
        }
        
        .modal-body {
            display: flex;
            gap: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }
        
        .modal-image-section {
            flex: 0 0 45%;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 30px 20px;
        }
        
        .modal-main-image {
            width: 100%;
            max-width: 100%;
            height: 100%;
            max-height: 400px;
            background-color: transparent;
            border-radius: 0;
            overflow: hidden;
            margin-bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-main-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        .modal-info-section {
            flex: 0 0 55%;
            padding: 30px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        .modal-category {
            font-size: 11px;
            color: #999;
            margin-bottom: 10px;
            letter-spacing: 0.5px;
        }
        
        .modal-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #000;
            letter-spacing: -1px;
        }
        
        .modal-code {
            font-size: 13px;
            color: #666;
            margin-bottom: 25px;
        }
        
        .modal-divider {
            height: 1px;
            background-color: #e0e0e0;
            margin: 25px 0;
        }
        
        .modal-spec {
            margin-bottom: 25px;
        }
        
        .modal-spec h3 {
            font-size: 13px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #000;
        }
        
        .modal-spec ul {
            list-style: none;
            padding: 0;
        }
        
        .modal-spec li {
            padding: 8px 0;
            font-size: 12px;
            color: #333;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .modal-spec li:last-child {
            border-bottom: none;
        }
        
        @media (max-width: 768px) {
            .modal-content {
                margin: 0;
                max-width: 100%;
                height: 100vh;
                flex-direction: column;
            }
            
            .modal-body {
                flex-direction: column;
                height: 100%;
            }
            
            .modal-image-section {
                flex: 0 0 40%;
                padding: 40px 20px;
            }
            
            .modal-info-section {
                flex: 1;
                padding: 40px 20px;
                max-height: none;
            }
            
            .modal-main-image {
                height: 100%;
            }
            
            .modal-title {
                font-size: 28px;
            }
        }
    </style>
</head>
<body>
<!-- ì¥ë°”êµ¬ë‹ˆ ì•„ì´ì½˜ -->
<a href="wishlist.html" class="wishlist-link">
    <span class="wishlist-icon">ğŸ›’</span>
    <span class="wishlist-count">0</span>
</a>

<!-- í—¤ë” -->
<div class="ë©”ë‰´">
    <div class="ìƒë‹¨">
        <a href="index.html">
            <img src="images/HYSLOGS.png" alt="í•˜ì˜ˆì„±í•©íŒ ë¡œê³ " class="logo">
        </a>
        <a href="index.html" style="text-decoration: none; color: inherit;">
            <div class="logotext">í•˜ ì˜ˆ ì„± í•© íŒ</div>
        </a>
        <a href="index.html" style="text-decoration: none; color: inherit;">
            <div class="logotext1">interior materials</div>
        </a>
    </div>
</div>

<div class="ë©”ë‰´2">
    <div class="line top-line"></div>
    <div class="boxtext">
        <a href="brand.html">ì—…ì²´ì†Œê°œ</a>
        <a href="JEPOM.html">ì œí’ˆì•ˆë‚´</a>
        <a href="goji.html">ê³µì§€ì‚¬í•­</a>
        <a href="root.html">ì˜¤ì‹œëŠ”ê¸¸</a>
        <a href="order.html">ë¬¸ì˜í•˜ê¸°</a>
    </div>
    <div class="line bottom-line"></div>
</div>

<!-- ì°œ ëª©ë¡ -->
<div class="wishlist-container">
    <div class="wishlist-header">
        <h1>ì°œ ëª©ë¡</h1>
        <div class="wishlist-count-text">
            ì´ <span id="totalCount">0</span>ê°œì˜ ì œí’ˆ
        </div>
    </div>
    
    <!-- ë¹ˆ ëª©ë¡ -->
    <div id="emptyWishlist" class="wishlist-empty" style="display: none;">
        <div class="wishlist-empty-icon">ğŸ›’</div>
        <h2>ì°œí•œ ì œí’ˆì´ ì—†ìŠµë‹ˆë‹¤</h2>
        <p>ë§ˆìŒì— ë“œëŠ” ì œí’ˆì„ ì°œí•´ë³´ì„¸ìš”!</p>
        <a href="JEPOM.html" class="go-shopping-btn">ì œí’ˆ ë‘˜ëŸ¬ë³´ê¸°</a>
    </div>
    
    <!-- ì°œ ëª©ë¡ ê·¸ë¦¬ë“œ -->
    <div id="wishlistGrid" class="wishlist-grid"></div>
    
    <!-- ì•¡ì…˜ ë²„íŠ¼ -->
    <div class="wishlist-actions" id="wishlistActions" style="display: none;">
        <button class="send-inquiry-btn" onclick="sendInquiry()">ğŸ“§ ì „ì²´ ê²¬ì  ë¬¸ì˜í•˜ê¸°</button>
        <button class="clear-all-btn" onclick="clearAllWishlist()">ğŸ—‘ï¸ ì „ì²´ ì‚­ì œ</button>
    </div>
</div>

<!-- í‘¸í„° -->
<footer class="footer">
    <div class="footer-content">
        <div class="footer-top">
            <div class="footer-contact">
                <h3>ê³ ê°ì„¼í„° <span class="phone">010-7654-6766, 010-9307-1889</span></h3>
                <p>í‰ì¼ ì˜¤ì „ 6ì‹œ30ë¶„ ~ ì˜¤í›„ 5ì‹œ (ì¼ìš”ì¼ ë° ê³µíœ´ì¼ íœ´ë¬´)</p>
            </div>
            <div class="footer-buttons">
                <button class="kakao-btn">ìƒë‹´í•˜ê¸° ğŸ’¬</button>
                <button class="faq-btn" onclick="location.href='order.html'">FAQ/ë¬¸ì˜í•˜ê¸°</button>
            </div>
        </div>
        
        <div class="footer-info">
            <div class="info-links">
                <a href="#">ê³µì§€ì‚¬í•­</a> | 
                <a href="#">ì´ìš©ì•½ê´€</a> | 
                <a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> | 
                <a href="#">í•˜ì˜ˆì„±í•©íŒë³´í—˜</a>
            </div>
            <p>ìƒí˜¸: í•˜ì˜ˆì„±í•©íŒ | ëŒ€í‘œ: ì´í¬ì—´ | ì£¼ì†Œ: ê²½ê¸°ë„ ê¹€í¬ì‹œ ê³ ì´Œì íƒœë¦¬ë¡œ37 2ì¸µ </p>
            <p>ëŒ€í‘œë²ˆí˜¸: 010-7654-6766 | ì´ë©”ì¼: eh1048@naver.com | ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: 675-15-02806</p>
            <p class="copyright">Copyright @ í•˜ì˜ˆì„±í•©íŒ All Rights Reserved.<br>Powered by Eoding Corp.</p>
        </div>
    </div>
</footer>

<!-- ì œí’ˆ ìƒì„¸ ëª¨ë‹¬ -->
<div id="productModal" class="modal-overlay" onclick="closeProductModal(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
        <button class="modal-close" onclick="closeProductModal()">Ã—</button>
        <div class="modal-body">
            <div class="modal-image-section">
                <div class="modal-main-image">
                    <img id="modalImage" src="" alt="">
                </div>
            </div>
            <div class="modal-info-section">
                <div class="modal-category" id="modalCategory"></div>
                <h2 class="modal-title" id="modalTitle"></h2>
                <div class="modal-code" id="modalCode"></div>
                
                <div class="modal-divider"></div>
                
                <div class="modal-spec">
                    <h3>SPEC</h3>
                    <ul id="modalSpec">
                        <li>â€¢ ì œí’ˆëª… : <span id="specName"></span></li>
                        <li>â€¢ ì œí’ˆì½”ë“œ : <span id="specCode"></span></li>
                        <li>â€¢ ì¢…ë¥˜ : <span id="specCategory"></span></li>
                        <li>â€¢ ê·œê²© : ìƒë‹´ ë¬¸ì˜</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// ì°œ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];

// Firebase Functions URL
const FIREBASE_FUNCTION_URL = 'https://us-central1-hayesung-2921b.cloudfunctions.net/sendInquiry';

// ì¹´ì¹´ì˜¤í†¡ ì±„ë„ ID
const KAKAO_CHANNEL_ID = '_xexfxixn';

// í˜„ì¬ ì„ íƒëœ ì œí’ˆ ì¸ë±ìŠ¤
let currentProductIndex = null;

// ì¥ë°”êµ¬ë‹ˆ ê°œìˆ˜ ì—…ë°ì´íŠ¸
function updateWishlistCount() {
    const countElement = document.querySelector('.wishlist-count');
    if (countElement) {
        countElement.textContent = wishlist.length;
        countElement.style.display = wishlist.length > 0 ? 'flex' : 'none';
    }
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì°œ ëª©ë¡ í‘œì‹œ
function displayWishlist() {
    const grid = document.getElementById('wishlistGrid');
    const empty = document.getElementById('emptyWishlist');
    const actions = document.getElementById('wishlistActions');
    const totalCount = document.getElementById('totalCount');
    
    totalCount.textContent = wishlist.length;
    updateWishlistCount();
    
    if (wishlist.length === 0) {
        empty.style.display = 'block';
        grid.style.display = 'none';
        actions.style.display = 'none';
    } else {
        empty.style.display = 'none';
        grid.style.display = 'grid';
        actions.style.display = 'flex';
        
        grid.innerHTML = wishlist.map((item, index) => `
            <div class="wishlist-item" onclick="openProductModal(${index})" style="cursor: pointer;">
                <div class="wishlist-item-image">
                    <img src="${item.image}" alt="${item.name}" onerror="this.src='https://via.placeholder.com/400x350/f5f5f5/999?text=${encodeURIComponent(item.name)}'">
                </div>
                <button class="remove-btn" onclick="event.stopPropagation(); removeFromWishlist(${index})">âœ•</button>
                <div class="wishlist-item-info">
                    <div class="wishlist-item-category">${item.mainCategory} / ${item.category}</div>
                    <div class="wishlist-item-name">${item.name}</div>
                    <div class="wishlist-item-code">${item.code}</div>
                    <div class="quantity-control" onclick="event.stopPropagation()">
                        <button class="quantity-btn" onclick="updateQuantity(${index}, -1)" ${(item.quantity || 1) <= 1 ? 'disabled' : ''}>âˆ’</button>
                        <span class="quantity-display">${item.quantity || 1}</span>
                        <button class="quantity-btn" onclick="updateQuantity(${index}, 1)">+</button>
                    </div>
                </div>
            </div>
        `).join('');
    }
}

// ì°œ ëª©ë¡ì—ì„œ ì œê±°
function removeFromWishlist(index) {
    if (confirm('ì´ ì œí’ˆì„ ì°œ ëª©ë¡ì—ì„œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        wishlist.splice(index, 1);
        localStorage.setItem('wishlist', JSON.stringify(wishlist));
        displayWishlist();
    }
}

// ìˆ˜ëŸ‰ ì—…ë°ì´íŠ¸
function updateQuantity(index, change) {
    if (!wishlist[index]) return;

    const currentQty = wishlist[index].quantity || 1;
    const newQty = currentQty + change;

    // ìˆ˜ëŸ‰ì€ ìµœì†Œ 1ê°œ
    if (newQty < 1) return;

    wishlist[index].quantity = newQty;
    localStorage.setItem('wishlist', JSON.stringify(wishlist));
    displayWishlist();
}

// ì „ì²´ ì‚­ì œ
function clearAllWishlist() {
    if (confirm('ëª¨ë“  ì°œ ëª©ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        wishlist = [];
        localStorage.setItem('wishlist', JSON.stringify(wishlist));
        displayWishlist();
    }
}

// ì œí’ˆ í˜ì´ì§€ë¡œ ì´ë™
function goToProduct(mainCategory, category) {
    window.location.href = `JEPOM.html?category=${mainCategory}&sub=${category}`;
}

// ì œí’ˆ ëª¨ë‹¬ ì—´ê¸°
function openProductModal(index) {
    currentProductIndex = index;
    const item = wishlist[index];
    
    document.getElementById('modalImage').src = item.image;
    document.getElementById('modalImage').alt = item.name;
    document.getElementById('modalCategory').textContent = `${item.mainCategory} / ${item.category}`;
    document.getElementById('modalTitle').textContent = item.name;
    document.getElementById('modalCode').textContent = `ì œí’ˆì½”ë“œ: ${item.code}`;
    
    // SPEC ì •ë³´ ì±„ìš°ê¸°
    document.getElementById('specName').textContent = item.name;
    document.getElementById('specCode').textContent = item.code;
    document.getElementById('specCategory').textContent = item.category;
    
    const modal = document.getElementById('productModal');
    modal.style.display = 'flex';
    setTimeout(() => {
        modal.classList.add('active');
    }, 10);
    document.body.style.overflow = 'hidden'; // ìŠ¤í¬ë¡¤ ë°©ì§€
}

// ì œí’ˆ ëª¨ë‹¬ ë‹«ê¸°
function closeProductModal(event) {
    if (event && event.target !== event.currentTarget) return;
    
    const modal = document.getElementById('productModal');
    modal.classList.remove('active');
    modal.style.display = 'none';
    document.body.style.overflow = 'auto'; // ìŠ¤í¬ë¡¤ ë³µêµ¬
    currentProductIndex = null;
}

// ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        const modal = document.getElementById('productModal');
        if (modal.classList.contains('active')) {
            closeProductModal();
        }
    }
});

// ì „ì²´ ì œí’ˆ ê²¬ì  ë¬¸ì˜
async function sendInquiry() {
    if (wishlist.length === 0) {
        alert('ì°œí•œ ì œí’ˆì´ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    const customerName = prompt('ì„±í•¨ì„ ì…ë ¥í•´ì£¼ì„¸ìš”:', '');
    if (!customerName) return;
    
    const customerPhone = prompt('ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”:', '010-');
    if (!customerPhone) return;
    
    showLoadingMessage();
    
    try {
        await sendToFirebase(wishlist, {
            name: customerName,
            phone: customerPhone
        });
    } catch (error) {
        hideLoadingMessage();
        alert('ì „ì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
    }
}

// ë‹¨ì¼ ì œí’ˆ ê²¬ì  ë¬¸ì˜ (ì‚­ì œë¨ - ëª¨ë‹¬ì—ì„œ ì²˜ë¦¬)

// Firebase Functionsë¡œ ì „ì†¡
async function sendToFirebase(products, customerInfo) {
    try {
        const response = await fetch(FIREBASE_FUNCTION_URL, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                products: products,
                customerInfo: customerInfo
            })
        });

        hideLoadingMessage();

        if (response.ok) {
            const result = await response.json();
            showSuccessMessage();
        } else {
            throw new Error('ì „ì†¡ ì‹¤íŒ¨');
        }
    } catch (error) {
        console.error('ì „ì†¡ ì˜¤ë¥˜:', error);
        hideLoadingMessage();
        
        if (confirm('âš ï¸ ìë™ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\n\nì¹´ì¹´ì˜¤í†¡ ì±„ë„ë¡œ ì§ì ‘ ë¬¸ì˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            fallbackToKakaoChannel(products, customerInfo);
        }
    }
}

// ë¡œë”© ë©”ì‹œì§€ í‘œì‹œ
function showLoadingMessage() {
    const loadingMsg = document.createElement('div');
    loadingMsg.id = 'loadingMessage';
    loadingMsg.innerHTML = `
        <div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                    background: white; padding: 30px; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.3);
                    z-index: 10000; text-align: center;">
            <div style="font-size: 24px; margin-bottom: 15px;">ğŸ“¤</div>
            <div style="font-size: 16px; font-weight: bold;">ë¬¸ì˜ ì „ì†¡ ì¤‘...</div>
        </div>
        <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                    background: rgba(0,0,0,0.5); z-index: 9999;"></div>
    `;
    document.body.appendChild(loadingMsg);
}

// ë¡œë”© ë©”ì‹œì§€ ì œê±°
function hideLoadingMessage() {
    const loadingMsg = document.getElementById('loadingMessage');
    if (loadingMsg) {
        document.body.removeChild(loadingMsg);
    }
}

// ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
function showSuccessMessage() {
    const successMsg = document.createElement('div');
    successMsg.innerHTML = `
        <div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                    background: white; padding: 40px; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.3);
                    z-index: 10000; text-align: center; max-width: 400px;">
            <div style="font-size: 48px; margin-bottom: 20px;">âœ…</div>
            <div style="font-size: 20px; font-weight: bold; margin-bottom: 15px; color: #27ae60;">ì „ì†¡ ì™„ë£Œ!</div>
            <div style="font-size: 14px; color: #666; line-height: 1.6;">
                ë¬¸ì˜ê°€ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.<br>
                ë¹ ë¥¸ ì‹œê°„ ë‚´ì— ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.<br><br>
                <strong>ê°ì‚¬í•©ë‹ˆë‹¤! ğŸ˜Š</strong>
            </div>
            <button onclick="this.parentElement.parentElement.remove()" 
                    style="margin-top: 20px; padding: 10px 30px; background: #333; color: white; 
                           border: none; border-radius: 5px; cursor: pointer; font-size: 14px;">
                í™•ì¸
            </button>
        </div>
        <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                    background: rgba(0,0,0,0.5); z-index: 9999;" 
                    onclick="this.parentElement.remove()"></div>
    `;
    document.body.appendChild(successMsg);
}

// ì¹´ì¹´ì˜¤í†¡ ë©”ì‹œì§€ í¬ë§·
function formatKakaoMessage(products, customerInfo) {
    let message = `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n`;
    message += `ğŸ“‹ ì°œ ëª©ë¡ ê²¬ì  ë¬¸ì˜\n`;
    message += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n`;
    message += `ğŸ‘¤ ê³ ê° ì •ë³´\n`;
    message += `   ì´ë¦„: ${customerInfo.name}\n`;
    message += `   ì—°ë½ì²˜: ${customerInfo.phone}\n\n`;
    message += `ğŸ“¦ ìš”ì²­ ì œí’ˆ (ì´ ${products.length}ê°œ)\n\n`;

    products.forEach((item, index) => {
        message += `${index + 1}. ${item.name}\n`;
        message += `   ğŸ“¦ ì œí’ˆì½”ë“œ: ${item.code}\n`;
        message += `   ğŸ“ ì¹´í…Œê³ ë¦¬: ${item.mainCategory} / ${item.category}\n`;
        message += `   ğŸ”¢ ìˆ˜ëŸ‰: ${item.quantity || 1}ê°œ\n\n`;
    });

    message += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n`;
    message += `â° ë¬¸ì˜ì‹œê°„: ${new Date().toLocaleString('ko-KR')}\n`;
    message += `ğŸŒ í•˜ì˜ˆì„±í•©íŒ ì›¹ì‚¬ì´íŠ¸\n`;

    return message;
}

// ë°±ì—…: ì¹´ì¹´ì˜¤í†¡ ì±„ë„ë¡œ ì´ë™
function fallbackToKakaoChannel(products, customerInfo) {
    const message = formatKakaoMessage(products, customerInfo);
    
    if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(message);
    } else {
        const textArea = document.createElement("textarea");
        textArea.value = message;
        textArea.style.position = "fixed";
        textArea.style.top = "-9999px";
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
    }
    
    window.open(`http://pf.kakao.com/${KAKAO_CHANNEL_ID}/chat`, '_blank');
    
    setTimeout(() => {
        alert('ğŸ“‹ ë¬¸ì˜ ë‚´ìš©ì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.\n\nì¹´ì¹´ì˜¤í†¡ ì±„íŒ…ì°½ì—ì„œ ë¶™ì—¬ë„£ê¸°(Ctrl+V ë˜ëŠ” ê¸¸ê²Œ ëˆŒëŸ¬ ë¶™ì—¬ë„£ê¸°) í•´ì£¼ì„¸ìš”!');
    }, 500);
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
window.addEventListener('load', displayWishlist);
</script>

</body>
</html>